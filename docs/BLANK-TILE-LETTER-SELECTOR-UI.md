# Blank Tile Letter Selector - UI Design

## Problem Statement

When a blank tile is placed on the board, the player must choose which letter (A-Z) it represents. We need a UI that:
- Works on both mobile and desktop
- Prevents invalid input (no numbers, symbols, multiple characters)
- Is fast and intuitive for both casual and power users
- Fits the aesthetic of a tile-based word game

## Solution: Custom Modal with Keyboard Support

### Approach: Visual Buttons + Keyboard Shortcuts

**Design:**
- Modal overlay with grid of 26 letter buttons (A-Z)
- Clicking a button selects that letter
- **Keyboard shortcuts**: Pressing A-Z on keyboard selects that letter
- ESC key cancels
- No text input field needed (prevents invalid input)

### Why This Approach?

**1. Mobile-First**
- Touch-friendly button grid works perfectly on phones/tablets
- No need to bring up mobile keyboard
- Large tap targets (40×40px buttons)

**2. No Validation Needed**
- Can't type "1", "?", "abc", or other invalid input
- Only way to choose is clicking A-Z or pressing A-Z key
- Impossible to make a mistake

**3. Visual Clarity**
- Player sees all 26 options at once
- No guessing what's valid
- Clear affordance (buttons look clickable)

**4. Tile Game Aesthetic**
- Letter buttons styled like tiles
- Matches the game's visual language
- Feels cohesive with board/rack

**5. Fast for Power Users**
- Desktop users: Just press Q key (no clicking needed)
- Mobile users: Tap the letter
- Both flows are equally fast

**6. Accessible**
- Keyboard navigation: Tab through letters, Enter to select
- Screen reader: "Select letter for blank tile. A, B, C..."
- High contrast buttons

## UI Mockup

```
┌─────────────────────────────────────────┐
│  Choose Letter for Blank Tile          │
├─────────────────────────────────────────┤
│                                          │
│  ┌───┐ ┌───┐ ┌───┐ ┌───┐ ┌───┐ ┌───┐  │
│  │ A │ │ B │ │ C │ │ D │ │ E │ │ F │  │
│  └───┘ └───┘ └───┘ └───┘ └───┘ └───┘  │
│                                          │
│  ┌───┐ ┌───┐ ┌───┐ ┌───┐ ┌───┐ ┌───┐  │
│  │ G │ │ H │ │ I │ │ J │ │ K │ │ L │  │
│  └───┘ └───┘ └───┘ └───┘ └───┘ └───┘  │
│                                          │
│  ┌───┐ ┌───┐ ┌───┐ ┌───┐ ┌───┐ ┌───┐  │
│  │ M │ │ N │ │ O │ │ P │ │ Q │ │ R │  │
│  └───┘ └───┘ └───┘ └───┘ └───┘ └───┘  │
│                                          │
│  ┌───┐ ┌───┐ ┌───┐ ┌───┐ ┌───┐ ┌───┐  │
│  │ S │ │ T │ │ U │ │ V │ │ W │ │ X │  │
│  └───┘ └───┘ └───┘ └───┘ └───┘ └───┘  │
│                                          │
│  ┌───┐ ┌───┐ ┌───┐                      │
│  │ Y │ │ Z │ │ESC│ (or click outside)   │
│  └───┘ └───┘ └───┘                      │
│                                          │
│  Tip: Click a letter or press any key   │
└─────────────────────────────────────────┘
```

## HTML Structure

```html
<!-- Blank Tile Letter Selection Modal -->
<div id="blank-letter-modal" class="modal-overlay" style="display: none;">
    <div class="blank-letter-selector">
        <h3>Choose Letter for Blank Tile</h3>
        <div class="letter-grid">
            <!-- Generated by JavaScript -->
            <button class="letter-btn" data-letter="A">A</button>
            <button class="letter-btn" data-letter="B">B</button>
            <!-- ... through Z ... -->
            <button class="letter-btn" data-letter="Z">Z</button>
        </div>
        <p class="hint">Click a letter or press any key (A-Z)</p>
        <button id="cancel-blank" class="btn-cancel">Cancel (ESC)</button>
    </div>
</div>
```

## CSS Styling

```css
/* Modal Overlay */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    animation: fadeIn 0.2s ease-out;
}

/* Selector Container */
.blank-letter-selector {
    background: #f5e6d3;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    max-width: 500px;
    width: 90%;
    animation: slideIn 0.3s ease-out;
}

.blank-letter-selector h3 {
    text-align: center;
    color: #4a3c28;
    margin: 0 0 20px 0;
    font-size: 20px;
}

/* Letter Grid */
.letter-grid {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 8px;
    margin-bottom: 20px;
}

/* Letter Buttons - Styled Like Tiles */
.letter-btn {
    width: 100%;
    aspect-ratio: 1;
    min-height: 50px;
    background: #d4a574;
    border: 3px solid #8b6f47;
    border-radius: 6px;
    font-size: 24px;
    font-weight: bold;
    color: #4a3c28;
    cursor: pointer;
    transition: all 0.15s ease;
    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
}

.letter-btn:hover {
    background: #e0b888;
    border-color: #ff9800;
    transform: translateY(-2px);
    box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3);
}

.letter-btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

/* Keyboard Focus Indicator */
.letter-btn:focus {
    outline: none;
    border-color: #ff9800;
    box-shadow: 0 0 0 3px rgba(255, 152, 0, 0.3);
}

/* Hint Text */
.hint {
    text-align: center;
    color: #666;
    font-size: 14px;
    margin: 10px 0;
}

/* Cancel Button */
.btn-cancel {
    width: 100%;
    padding: 12px;
    background: #999;
    border: none;
    border-radius: 6px;
    color: white;
    font-size: 16px;
    cursor: pointer;
    transition: background 0.2s;
}

.btn-cancel:hover {
    background: #777;
}

/* Animations */
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Mobile Responsive */
@media (max-width: 600px) {
    .blank-letter-selector {
        padding: 20px;
    }

    .letter-grid {
        gap: 6px;
    }

    .letter-btn {
        min-height: 40px;
        font-size: 20px;
    }
}
```

## JavaScript Implementation

```javascript
/**
 * Show blank letter selector modal
 * Returns a Promise that resolves with selected letter (A-Z) or null if cancelled
 */
function showBlankLetterSelector() {
    return new Promise((resolve) => {
        const modal = document.getElementById('blank-letter-modal');
        const letterGrid = modal.querySelector('.letter-grid');
        const cancelBtn = modal.querySelector('#cancel-blank');

        // Clear previous listeners (if any)
        letterGrid.innerHTML = '';

        // Create letter buttons A-Z
        const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
        letters.forEach(letter => {
            const btn = document.createElement('button');
            btn.className = 'letter-btn';
            btn.dataset.letter = letter;
            btn.textContent = letter;
            btn.setAttribute('tabindex', '0');
            btn.setAttribute('aria-label', `Select letter ${letter}`);

            btn.addEventListener('click', () => {
                closeModal(letter);
            });

            letterGrid.appendChild(btn);
        });

        // Keyboard event handler
        function handleKeyPress(e) {
            const key = e.key.toUpperCase();

            // ESC to cancel
            if (e.key === 'Escape') {
                closeModal(null);
                return;
            }

            // A-Z to select
            if (key.length === 1 && key >= 'A' && key <= 'Z') {
                closeModal(key);
                return;
            }
        }

        // Cancel button
        function handleCancel() {
            closeModal(null);
        }

        // Close modal and clean up
        function closeModal(selectedLetter) {
            // Remove listeners
            document.removeEventListener('keydown', handleKeyPress);
            cancelBtn.removeEventListener('click', handleCancel);
            modal.removeEventListener('click', handleBackdropClick);

            // Hide modal
            modal.style.display = 'none';

            // Resolve promise
            resolve(selectedLetter);
        }

        // Click outside to cancel
        function handleBackdropClick(e) {
            if (e.target === modal) {
                closeModal(null);
            }
        }

        // Attach listeners
        document.addEventListener('keydown', handleKeyPress);
        cancelBtn.addEventListener('click', handleCancel);
        modal.addEventListener('click', handleBackdropClick);

        // Show modal
        modal.style.display = 'flex';

        // Focus first letter button for keyboard navigation
        letterGrid.querySelector('.letter-btn').focus();
    });
}

/**
 * Example usage when placing blank tile
 */
async function placeTileOnBoard(cell, tile) {
    // Check if blank tile
    if (tile.dataset.isBlank === 'true') {
        const selectedLetter = await showBlankLetterSelector();

        if (!selectedLetter) {
            // User cancelled - don't place tile
            console.log('[Blank] Placement cancelled');
            return false;
        }

        // Assign letter to blank
        tile.dataset.assignedLetter = selectedLetter;
        console.log('[Blank] Assigned letter:', selectedLetter);
    }

    // Continue with normal tile placement...
    const row = parseInt(cell.dataset.row);
    const col = parseInt(cell.dataset.col);
    // ... rest of placement logic
}
```

## User Experience Flow

### Desktop User (Keyboard)
1. Drags blank tile (empty tile) to board → modal appears
2. Presses 'Q' on keyboard → Q is selected immediately
3. Modal closes, tile shows 'Q' with blank styling
4. Total time: ~1 second

### Mobile User (Touch)
1. Taps blank tile (empty tile) → becomes selected
2. Taps board cell → modal appears
3. Taps 'Q' button in grid → Q is selected
4. Modal closes, tile shows 'Q' with blank styling
5. Total time: ~2 seconds

### Cancellation
1. Modal appears
2. User presses ESC or clicks Cancel or clicks outside modal
3. Blank returns to rack as empty tile
4. No letter assigned

## Accessibility Features

**Keyboard Navigation:**
- Tab through letter buttons
- Arrow keys to navigate grid (optional enhancement)
- Enter/Space to select focused button
- ESC to cancel

**Screen Reader:**
- Modal announces: "Choose letter for blank tile"
- Each button: "Button, A" / "Button, B" / etc.
- Hint text: "Click a letter or press any key A through Z"
- Cancel: "Button, Cancel, press Escape"

**Visual:**
- High contrast buttons
- Large tap targets (50×50px minimum)
- Clear focus indicators
- Hover states for discoverability

## Why Not Standard Keyboard Input?

### Problems with Text Input Field:

1. **Validation Complexity**
   ```javascript
   // What if user types...
   "abc"     // Multiple characters?
   "1"       // Number?
   "?"       // Symbol?
   ""        // Nothing?
   "  "      // Spaces?
   "Shift"   // Modifier key?
   ```

2. **Mobile Keyboard Issues**
   - Takes up 40-50% of screen
   - Hides game board
   - Requires keyboard to appear/disappear (janky animation)
   - Different keyboards on iOS/Android

3. **Autocorrect Problems**
   - iOS might autocorrect "q" to "quite"
   - Need to disable autocorrect/autocapitalize
   - Feels unnatural

4. **Focus Management**
   - Need to focus input field
   - Need to select existing text (if any)
   - Need to handle blur events

5. **Less Discoverable**
   - Not obvious you should type
   - Need placeholder text
   - Need validation error messages

### Our Solution is Better Because:

✅ Works perfectly on mobile (no keyboard needed)
✅ Impossible to enter invalid input
✅ Visual and discoverable
✅ Fast for both mouse and keyboard users
✅ Matches game aesthetic (tile buttons)
✅ No validation logic needed
✅ No focus management complexity
✅ Clear affordance (buttons look clickable)

## Performance Considerations

- Modal HTML created once on page load (not per-selection)
- Event listeners added/removed per modal open/close
- No animation lag (CSS transitions only)
- Keyboard shortcuts respond instantly (no debouncing needed)

## Future Enhancements

**V1 (MVP):**
- Grid of A-Z buttons
- Click or press key to select
- ESC to cancel

**V2 (Optional):**
- Show tile point values on buttons (Q=10, A=1, etc.) - wait, blanks score 0, so this might be confusing
- Highlight high-value letters (Q, X, Z) in different color
- Keyboard shortcuts: Arrow keys to navigate, Enter to confirm
- Recently used letters float to top
- Smart suggestions based on board state ("E, R, S, T would form valid words")

**V3 (Advanced):**
- AI hint: "Using Q here would score 24 points"
- Show which letters would form valid words
- Undo last blank assignment

## Testing Checklist

- [ ] Modal appears when blank placed on board
- [ ] All 26 letters are clickable
- [ ] Clicking letter closes modal and assigns letter
- [ ] Pressing A-Z key selects that letter
- [ ] ESC key cancels and returns blank to rack
- [ ] Click outside modal cancels
- [ ] Cancel button cancels
- [ ] Mobile: buttons are large enough to tap
- [ ] Mobile: no keyboard appears
- [ ] Desktop: keyboard shortcuts work instantly
- [ ] Focus indicator is visible
- [ ] Screen reader announces properly
- [ ] Animation is smooth

## Recommendation

**Use custom modal with A-Z button grid + keyboard shortcuts.**

This gives us:
- Best mobile experience (no keyboard)
- Best desktop experience (keyboard shortcuts)
- No validation errors possible
- Clean, tile-game aesthetic
- Accessible and intuitive

**Do NOT use standard text input** - it's harder to use on mobile, requires complex validation, and doesn't fit the game aesthetic.

---

**Document Status:** Design specification complete, ready for implementation
**Last Updated:** 2025-10-05
