<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GD024HNJRK"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-GD024HNJRK');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui, viewport-fit=cover">
    <title>RogueLetters - A Daily Word Game</title>
    <link rel="stylesheet" href="./styles.css?v=33.5">
    <meta name="description" content="Play RogueLetters - a daily word puzzle game. Build words on a letter-tile board to maximize your score!">


    <meta name="screen-orientation" content="portrait">
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='75' font-size='75'>üé≤</text></svg>">
</head>
<body>
	<header>
	<h1>Rogue<span class="accent"><a href="/">Letters</a></span></h1>
	<button id="settings-btn" class="header-icon-btn" title="Settings" onclick="openSettingsModal()">
		<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
			<path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
		</svg>
	</button>
	<!-- Game Progress Display -->
	<div id="game-progress">
		<span id="progress-round">Round 1</span>
		<span class="progress-sep">|</span>
		<span id="progress-set">Set 1</span>
		<span class="progress-sep">|</span>
		<span id="progress-coins">$0</span>
		<!-- Tile bag icon -->
		<button id="bag-viewer-btn" class="bag-icon-btn" title="Tile Bag">
			<svg width="18" height="18" viewBox="160 225 200 280" fill="currentColor">
				<path d="M299.409 241.354c-5.28.12-10.21 2.415-16.937 9.594l-6.565 6.969-6.812-6.72c-7.387-7.28-13.216-9.29-19.125-9.03-5.908.26-12.855 3.367-20.625 9.656l-6.217 5.03-5.906-5.374c-8.9-8.052-16.485-10.439-23.75-10.064-5.288.274-10.775 2.266-16.25 5.75l40.966 73.69c15.454 9.451 47.034 13.006 68.75 2.062l39.594-73.344c-7.51-3.062-14.26-6.202-20.094-7.406-2.112-.437-4.07-.756-5.968-.813a20.81 20.81 0 0 0-1.06 0zm-89.97 96.188v.002c-18.035 12.742-32.516 34.717-38.125 66.904-5.435 31.196 3.129 52.266 18.283 66.625 15.155 14.36 37.902 21.736 61 21.436 23.1-.3 46.136-8.31 61.625-22.936 15.49-14.627 24.249-35.425 19.281-65.187-5.137-30.757-18.4-52.148-35.19-65.094-28.482 15.056-64.095 11.856-86.875-1.75z"/>
			</svg>
		</button>
	</div>
	<div id="subtitle">Score <span id="subtitle-target">40</span> in <span id="subtitle-turns">5</span> turns to advance</div>
	<div id="status"></div>
	</header>

        <!-- Debug Mode Toggle (hidden by default, activate with ?debug=1) -->
        <div id="debug-controls" style="display: none; padding: 10px; background: #ff9800; color: white; text-align: center;">
            <label style="cursor: pointer;">
                <input type="checkbox" id="debug-mode-toggle" style="margin-right: 5px;">
                Debug Mode (Accept Any Word)
            </label>
        </div>

        <main>
            <!-- Two Column Layout -->
            <div id="game-container" class="two-column-layout">
                <!-- Center - Game Board and Controls -->
                <div id="center-game-area">
                    <div id="board-container">
                        <div id="game-board" class="board"></div>
                    </div>

                    <div id="tile-rack-container">
                        <button id="recall-tiles" class="recall-btn" title="Recall all tiles to rack" style="display: none;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <path d="M12 3v15m0 0l-7-7m7 7l7-7"/>
                            </svg>
                        </button>
                        <!-- Exchange tiles button - shown when no tiles on board and player has coins -->
                        <button id="exchange-tiles" class="exchange-btn" title="Exchange tiles" style="display: none;">
                            <svg class="exchange-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                <path d="M7 16V4m0 0L3 8m4-4l4 4M17 8v12m0 0l4-4m-4 4l-4-4"/>
                            </svg>
                            <svg class="pass-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" style="display: none;">
                                <path d="M5 4l10 8-10 8V4z"/>
                                <path d="M19 5v14"/>
                            </svg>
                            <span class="exchange-cost">$1</span>
                        </button>
                        <div id="tile-rack-board" class="board">
                            <!-- Second board for tile rack -->
                        </div>
                        <button id="shuffle-rack" class="shuffle-btn" title="Shuffle tiles">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <path d="M16 3h5v5M4 20L21 3M21 16v5h-5M15 15l6 6M4 4l5 5"/>
                            </svg>
                        </button>
                    </div>

                    <!-- Rogue Inventory - shows owned rogues (roguelike mode) -->
                    <div id="rogue-inventory" class="hidden">
                        <div id="rogue-slots">
                            <!-- Filled dynamically by renderRogueInventory() -->
                        </div>
                    </div>


                    <!-- Top Deck - shows next 3 tiles (when Top Deck rogue active) -->
                    <div id="top-deck-display" class="hidden">
                        <span class="top-deck-label">Next:</span>
                        <div id="top-deck-tiles">
                            <!-- Filled dynamically -->
                        </div>
                    </div>

                    <!-- Potential Words - shown for both desktop and mobile -->
                    <div id="potential-words">
                        <div id="potential-words-list">
                            <!-- Will be populated dynamically -->
                        </div>
                    </div>

                </div>

                <!-- Right sidebar removed - potential words now shown under rack -->
            </div>

            <!-- High Scores Section -->
            <div id="high-scores-section" style="display: none;">
                <h2>Today's Top Scores</h2>
                <div id="high-scores-list"></div>
                <button id="view-replay" class="btn btn-secondary" style="display: none;">View Replay</button>
            </div>

            <!-- Game Over Section -->
            <div id="game-over-section" style="display: none;">
                <h2>Game Complete!</h2>
                <div id="final-score-display"></div>
                <div id="score-submission">
                    <input type="text" id="player-name" placeholder="AAA" maxlength="3" style="text-transform: uppercase; text-align: center; width: 80px; font-size: 24px; font-weight: bold;">
                    <button id="submit-score" class="btn btn-primary">Submit Score</button>
                </div>
                <button id="share-game" class="btn btn-secondary" style="display: none;">Share</button>
                <button id="new-game" class="btn btn-primary">Play Tomorrow's Game</button>
            </div>

            <!-- Replay Viewer -->
            <div id="replay-viewer" style="display: none;">
                <h2>Board Replay</h2>
                <div id="replay-board" class="board"></div>
                <div id="replay-controls">
                    <button id="prev-move" class="btn btn-secondary">Previous</button>
                    <span id="move-indicator">Move 1/5</span>
                    <button id="next-move" class="btn btn-secondary">Next</button>
                    <button id="close-replay" class="btn btn-secondary">Close</button>
                </div>
            </div>
	</main>
	<footer>
		<div id="feedbackFooter">
			<div id="feedbackRow">
				<a href="#" id="shareIcon" class="hidden" aria-label="Share your result">
					<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24" class="game-icon">
						<path fill="var(--white)" d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92c0-1.61-1.31-2.92-2.92-2.92zM18 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM6 13c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm12 7.02c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"></path>
					</svg>
				</a>
				<span class="feedback-square turn-1 current-turn"></span>
				<span class="feedback-square turn-2"></span>
				<span class="feedback-square turn-3"></span>
				<span class="feedback-square turn-4"></span>
				<span class="feedback-square turn-5"></span>
				<div class="total-score-display" style="display: none;">
					<span class="score-value">0</span>
				</div>
				<div id="target-progress-container" class="hidden">
					<div class="target-progress">
						<div id="target-progress-fill" class="target-progress-fill"></div>
					</div>
					<span id="target-progress-text">0/80</span>
				</div>
			</div>
		</div>
		<p>&copy; <span id="copyright-year"></span> <span id="version-tooltip" class="version-tooltip" data-branch="compact-ui" data-version="0.1.0">RogueLetters</span> | <a href="https://buymeacoffee.com/daver">Buy my kid jellybeans</a></p>
	</footer>

        <!-- Loading Overlay -->
        <div id="loading-overlay" class="loading-overlay" style="display: none;">
            <div class="loading-spinner"></div>
            <p>Loading game...</p>
        </div>

        <!-- Error Modal -->
        <div id="error-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3>Error</h3>
                <p id="error-message"></p>
                <button id="close-error" class="btn btn-primary">OK</button>
            </div>
        </div>

        <!-- Settings Modal -->
        <div id="settings-modal" class="modal" style="display: none;">
            <div class="modal-content settings-modal-content">
                <button class="modal-close-btn" onclick="closeSettingsModal()">√ó</button>
                <h3>Settings</h3>

                <!-- Animation Speed -->
                <div class="settings-section">
                    <label class="settings-label">Animation Speed</label>
                    <div class="settings-speed-slider">
                        <div class="speed-track" onclick="handleSpeedTrackClick(event)">
                            <div class="speed-thumb"></div>
                            <div class="speed-tick" data-speed="0.5x" style="left: 0%"></div>
                            <div class="speed-tick" data-speed="1x" style="left: 25%"></div>
                            <div class="speed-tick" data-speed="5x" style="left: 50%"></div>
                            <div class="speed-tick" data-speed="20x" style="left: 75%"></div>
                            <div class="speed-tick" data-speed="skip" style="left: 100%"></div>
                        </div>
                        <div class="speed-labels">
                            <span data-speed="0.5x" onclick="setAnimationSpeed('0.5x')">¬Ω√ó</span>
                            <span data-speed="1x" onclick="setAnimationSpeed('1x')">1√ó</span>
                            <span data-speed="5x" onclick="setAnimationSpeed('5x')">5√ó</span>
                            <span data-speed="20x" onclick="setAnimationSpeed('20x')">20√ó</span>
                            <span data-speed="skip" onclick="setAnimationSpeed('skip')">Skip</span>
                        </div>
                    </div>
                </div>

                <!-- Abandon Run -->
                <div class="settings-section settings-danger-section">
                    <label class="settings-label">Danger Zone</label>
                    <button id="abandon-run-btn" class="btn btn-danger" onclick="confirmAbandonRun()">Abandon Run</button>
                    <p class="settings-hint">Start over from Set 1, Round 1</p>
                </div>
            </div>
        </div>

        <!-- Blank Tile Letter Selection Modal -->
        <div id="blank-letter-modal" class="modal" style="display: none;">
            <div class="modal-content blank-letter-modal-content">
                <h3>Choose a Letter</h3>
                <div id="letter-grid" class="letter-grid">
                    <!-- A-Z buttons generated dynamically -->
                </div>
                <button id="cancel-blank-selection" class="btn btn-secondary">Cancel</button>
            </div>
        </div>

        <!-- Exchange Tiles Modal -->
        <div id="exchange-modal" class="modal" style="display: none;">
            <div class="modal-content exchange-modal-content">
                <div class="popup-content">
                    <button id="cancel-exchange" class="popup-close-btn" aria-label="Cancel">√ó</button>
                    <h2>Exchange Tiles</h2>
                    <p id="exchange-instruction">Tap tiles to exchange</p>
                    <p id="exchange-cost-info" class="exchange-cost-info">Cost: $1 per exchange</p>
                    <div id="exchange-rack" class="exchange-rack">
                        <!-- Tiles rendered dynamically -->
                    </div>
                    <div class="popup-buttons">
                        <button id="confirm-exchange" class="popup-btn-primary" disabled>Exchange selected tiles</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Completion Popup -->
        <div id="game-popup" class="hidden">
            <div class="popup-content">
                <button id="popup-close-x" class="popup-close-btn" aria-label="Close">√ó</button>
                <h2 id="popup-title">Game Complete!</h2>
                <div id="popup-score-section">
                    <div id="popup-score-label">Your Score</div>
                    <div id="popup-score-value">0</div>
                </div>

                <!-- High Score Section -->
                <div id="popup-high-score-section" style="display: none;">
                    <div class="high-score-comparison">
                        <span id="high-score-label">High Score:</span> <a href="#" id="high-score-link">0</a>
                    </div>
                    <div id="high-score-achievement" style="display: none;">
                        üèÜ You got the new high score!
                    </div>
                </div>

                <div id="popup-buttons" style="display: none;">
                    <button id="share-popup-btn" class="popup-btn popup-btn-primary">Share Score</button>
                    <button id="share-board-btn" class="popup-btn popup-btn-secondary" disabled>Preparing...</button>
                </div>

                <!-- Game Navigation Tabs -->
                <div class="game-tabs">
                    <a href="/" class="game-tab game-tab-active">
                        <span class="tab-emoji">üé≤</span>
                        <span class="tab-name">RogueLetters</span>
                    </a>
                    <a href="https://letters.wiki" class="game-tab">
                        <span class="tab-emoji">üìù</span>
                        <span class="tab-name">Letters</span>
                    </a>
                    <a href="https://dates.wiki" class="game-tab">
                        <span class="tab-emoji">üìÖ</span>
                        <span class="tab-name">Dates</span>
                    </a>
                </div>
            </div>
        </div>

	<!-- Run Complete Screen (beat the round) -->
	<div id="round-complete-popup" class="hidden">
		<div class="popup-content">
			<button class="popup-close-btn" aria-label="Close">√ó</button>
			<h2>Round Complete!</h2>
			<div class="round-result">
				<div class="result-row">
					<span>Your Score:</span>
					<span id="round-score-value">0</span>
				</div>
				<div class="result-row">
					<span>Target:</span>
					<span id="round-target-value">80</span>
				</div>
				<div class="result-row extra">
					<span>Extra:</span>
					<span id="round-extra-value">+0</span>
				</div>
			</div>
			<button id="next-round-btn" class="popup-btn popup-btn-primary">Next Round</button>
		</div>
	</div>

	<!-- Run Failed Screen (didn't hit target) -->
	<div id="run-failed-popup" class="hidden">
		<div class="popup-content">
			<h2>Run Failed</h2>
			<div class="round-result">
				<div class="result-row">
					<span>Your Score:</span>
					<span id="failed-score-value">0</span>
				</div>
				<div class="result-row">
					<span>Target:</span>
					<span id="failed-target-value">80</span>
				</div>
				<div class="result-row deficit">
					<span>Needed:</span>
					<span id="failed-deficit-value">-0</span>
				</div>
			</div>
			<p class="fail-message">You needed <span id="fail-amount">0</span> more points to advance.</p>
			<button id="try-again-btn" class="popup-btn popup-btn-primary">Try Again</button>
		</div>
	</div>

	<!-- Run Victory Screen (beat all rounds in a set) -->
	<div id="run-victory-popup" class="hidden">
		<div class="popup-content">
			<h2>üéâ Set Complete!</h2>
			<p>You completed all 3 rounds!</p>
			<div class="round-result">
				<div class="result-row">
					<span>Total Score:</span>
					<span id="victory-total-value">0</span>
				</div>
			</div>
			<div id="victory-rounds-summary"></div>
			<button id="next-set-btn" class="popup-btn popup-btn-primary">Next Set</button>
		</div>
	</div>

	<!-- Start Run Screen -->
	<div id="start-run-popup" class="hidden">
		<div class="popup-content">
			<h2>üé≤ RogueLetters</h2>
			<p>Beat escalating score targets across 3 rounds per set.</p>
			<div class="targets-preview">
				<div class="target-item">Round 1: 40 pts</div>
				<div class="target-item">Round 2: 60 pts</div>
				<div class="target-item">Round 3: 80 pts</div>
			</div>
			<button id="start-run-btn" class="popup-btn popup-btn-primary">Start Set</button>
		</div>
	</div>

	<!-- Earnings Screen (Full Page) -->
	<div id="earnings-screen" class="full-screen hidden">
		<div class="full-screen-content">
			<h2>Round Complete!</h2>

			<div class="score-summary">
				<div class="score-pair">
					<span class="score-label">Score</span>
					<span class="score-value" id="earnings-score">0</span>
				</div>
				<div class="score-pair">
					<span class="score-label">Target</span>
					<span class="score-value" id="earnings-target">0</span>
				</div>
			</div>

			<div id="earnings-extra-display" class="extra-display">
				Extra: +<span id="earnings-extra-points">0</span> points
			</div>
			<div id="earnings-target-reached" class="target-reached-display hidden">
				Target reached!
			</div>

			<div class="earnings-breakdown">
				<h3>Earnings</h3>
				<div class="earnings-row">
					<span>Round bonus</span>
					<span>$<span id="earnings-base">0</span></span>
				</div>
				<div class="earnings-row earnings-boost-row" id="earnings-salary-bump-row" style="display: none;">
					<span>üíµ Salary Bump</span>
					<span>+$3</span>
				</div>
				<div class="earnings-row" id="earnings-extra-row">
					<span>Extra bonus <span class="bonus-rate">($1 per <span id="earnings-bonus-threshold">10</span> pts)</span></span>
					<span>$<span id="earnings-extra-bonus">0</span></span>
				</div>
				<div class="earnings-row earnings-total">
					<span>Total earned</span>
					<span>$<span id="earnings-total">0</span></span>
				</div>
				<div class="bank-update">
					Bank: $<span id="bank-before">0</span> ‚Üí $<span id="bank-after">0</span>
				</div>
			</div>

			<button id="earnings-continue-btn" class="popup-btn popup-btn-primary">Continue</button>
		</div>
	</div>

	<!-- Shop Screen (Full Page - Compact Layout) -->
	<div id="shop-screen" class="full-screen hidden">
		<div class="shop-compact">
			<!-- Header: Coins + Bag Icon -->
			<div class="shop-header">
				<span class="shop-coins">$<span id="shop-coins">0</span></span>
				<button id="shop-bag-btn" class="shop-bag-btn" title="View Tile Bag">
					<svg width="18" height="18" viewBox="160 225 200 280" fill="currentColor">
						<path d="M299.409 241.354c-5.28.12-10.21 2.415-16.937 9.594l-6.565 6.969-6.812-6.72c-7.387-7.28-13.216-9.29-19.125-9.03-5.908.26-12.855 3.367-20.625 9.656l-6.217 5.03-5.906-5.374c-8.9-8.052-16.485-10.439-23.75-10.064-5.288.274-10.775 2.266-16.25 5.75l40.966 73.69c15.454 9.451 47.034 13.006 68.75 2.062l39.594-73.344c-7.51-3.062-14.26-6.202-20.094-7.406-2.112-.437-4.07-.756-5.968-.813a20.81 20.81 0 0 0-1.06 0zm-89.97 96.188v.002c-18.035 12.742-32.516 34.717-38.125 66.904-5.435 31.196 3.129 52.266 18.283 66.625 15.155 14.36 37.902 21.736 61 21.436 23.1-.3 46.136-8.31 61.625-22.936 15.49-14.627 24.249-35.425 19.281-65.187-5.137-30.757-18.4-52.148-35.19-65.094-28.482 15.056-64.095 11.856-86.875-1.75z"/>
					</svg>
				</button>
			</div>

			<!-- Tiles Row: 2 buffed tiles + upgrade (tap to buy) -->
			<div class="shop-tiles-row">
				<div class="shop-item" id="shop-tile-0" data-type="tile" data-index="0">
					<div class="tile shop-tile" id="shop-tile-display-0">
						<span class="tile-letter" id="shop-tile-letter-0">E</span>
						<span class="tile-score" id="shop-tile-score-0">1</span>
					</div>
					<span class="shop-item-label" id="shop-buff-label-0">+1</span>
				</div>
				<div class="shop-item" id="shop-tile-1" data-type="tile" data-index="1">
					<div class="tile shop-tile" id="shop-tile-display-1">
						<span class="tile-letter" id="shop-tile-letter-1">S</span>
						<span class="tile-score" id="shop-tile-score-1">1</span>
					</div>
					<span class="shop-item-label" id="shop-buff-label-1">+1</span>
				</div>
				<div class="shop-item" id="shop-upgrade-item" data-type="upgrade">
					<div class="shop-upgrade-icon-box">‚¨ÜÔ∏è</div>
					<span class="shop-item-label">Upgrade</span>
				</div>
			</div>

			<!-- Rogues Row: 3 icons with prices (tap to buy) -->
			<div class="shop-rogues-row" id="shop-rogue-section">
				<div class="shop-rogue-item" id="shop-rogue-0" data-type="rogue" data-index="0">
					<div class="shop-rogue-icon" id="shop-rogue-icon-0">üé≠</div>
					<span class="shop-rogue-price" id="shop-rogue-price-0">$5</span>
				</div>
				<div class="shop-rogue-item" id="shop-rogue-1" data-type="rogue" data-index="1">
					<div class="shop-rogue-icon" id="shop-rogue-icon-1">üé≤</div>
					<span class="shop-rogue-price" id="shop-rogue-price-1">$7</span>
				</div>
				<div class="shop-rogue-item" id="shop-rogue-2" data-type="rogue" data-index="2">
					<div class="shop-rogue-icon" id="shop-rogue-icon-2">üí∞</div>
					<span class="shop-rogue-price" id="shop-rogue-price-2">$4</span>
				</div>
			</div>

			<!-- Fixed Bottom: Continue Button -->
			<div class="shop-bottom-bar">
				<button id="shop-continue-btn" class="shop-continue-btn">Continue</button>
			</div>
		</div>
	</div>

	<!-- Bag Viewer Popup -->
	<div id="bag-viewer-popup" class="modal" style="display: none;">
		<div class="modal-content bag-modal-content">
			<div class="popup-content">
				<button id="bag-close-btn" class="popup-close-btn" aria-label="Close">√ó</button>
				<h2>Tile Bag</h2>
				<div class="bag-summary">
					<span id="bag-remaining">85</span> / <span id="bag-total">100</span> tiles remaining
				</div>
				<div class="bag-toggle">
					<button id="bag-toggle-remaining" class="bag-toggle-btn active">Remaining</button>
					<button id="bag-toggle-total" class="bag-toggle-btn">Total</button>
				</div>
				<div id="bag-tiles-grid" class="bag-tiles-grid">
					<!-- Populated by JS: 27 tile entries (A-Z + blank) -->
				</div>
			</div>
		</div>
	</div>

	<!-- Set Complete Screen (Full Page) -->
	<div id="set-complete-screen" class="full-screen hidden">
		<div class="full-screen-content">
			<h2>Set <span id="set-complete-number">1</span> Complete!</h2>

			<div id="set-rounds-summary" class="rounds-summary">
				<!-- Populated by JS -->
			</div>

			<div class="next-set-preview">
				<h3>Next: Set <span id="next-set-number">2</span></h3>
				<div id="next-set-targets" class="targets-preview">
					<!-- Populated by JS -->
				</div>
			</div>

			<button id="set-continue-btn" class="popup-btn popup-btn-primary">Start Next Set</button>
		</div>
	</div>

	<!-- Rogue Details Modal -->
	<div id="rogue-modal" class="modal" style="display: none;">
		<div class="modal-content rogue-modal-content">
			<div class="popup-content">
				<button id="rogue-modal-close" class="popup-close-btn" aria-label="Close">√ó</button>
				<div id="rogue-modal-icon" class="rogue-modal-icon"></div>
				<h2 id="rogue-modal-name"></h2>
				<p id="rogue-modal-description" class="rogue-modal-desc"></p>
				<button id="rogue-discard-btn" class="btn btn-danger">Discard</button>
			</div>
		</div>
	</div>

	<!-- Rogue Discard Modal (when purchasing at max capacity) -->
	<div id="rogue-discard-modal" class="modal" style="display: none;">
		<div class="modal-content rogue-discard-modal-content">
			<div class="popup-content">
				<button id="rogue-discard-modal-close" class="popup-close-btn" aria-label="Close">√ó</button>
				<h2>Rogues' Gallery Full</h2>
				<p class="rogue-discard-prompt">Choose a rogue to discard to make room for:</p>
				<div id="rogue-discard-new" class="rogue-discard-new-card">
					<!-- Filled dynamically -->
				</div>
				<div id="rogue-discard-slots" class="rogue-discard-slots">
					<!-- Filled dynamically with current rogues -->
				</div>
				<button id="rogue-discard-cancel" class="popup-btn popup-btn-secondary">Cancel</button>
			</div>
		</div>
	</div>

	<!-- Bottom Sheet (reusable component) -->
	<div id="bottom-sheet" class="bottom-sheet hidden">
		<div class="bottom-sheet-backdrop"></div>
		<div class="bottom-sheet-container">
			<div class="bottom-sheet-handle"></div>
			<button class="bottom-sheet-close" aria-label="Close">√ó</button>
			<div class="bottom-sheet-content">
				<!-- Content injected dynamically -->
			</div>
		</div>
	</div>

    <!-- LZ-String compression library for shareable URLs -->
    <script src="https://cdn.jsdelivr.net/npm/lz-string@1.5.0/libs/lz-string.min.js"></script>

    <script src="./script.js?v=43.5"></script>
</body>
</html>